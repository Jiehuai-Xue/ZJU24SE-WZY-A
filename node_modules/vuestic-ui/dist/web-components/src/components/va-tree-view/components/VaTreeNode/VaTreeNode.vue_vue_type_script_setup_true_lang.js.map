{"version":3,"file":"VaTreeNode.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../../../src/components/va-tree-view/components/VaTreeNode/VaTreeNode.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-tree-node\"\n    :class=\"treeNodeClassComputed\"\n    :role=\"roleComputed\"\n    :aria-expanded=\"isExpandedComputed\"\n    :aria-disabled=\"$props.node.disabled\"\n    :aria-checked=\"!!$props.node.checked\"\n    :tabindex=\"tabIndexComputed\"\n    @keydown.up.stop.prevent=\"handleKeyboardNavigation($event, $props.node)\"\n    @keydown.right.stop.prevent=\"handleKeyboardNavigation($event, $props.node)\"\n    @keydown.down.stop.prevent=\"handleKeyboardNavigation($event, $props.node)\"\n    @keydown.left.stop.prevent=\"handleKeyboardNavigation($event, $props.node)\"\n    @keydown.space.stop.prevent=\"handleKeyboardNavigation($event, $props.node)\"\n    @keydown.esc.stop.prevent=\"handleKeyboardNavigation($event, $props.node)\"\n  >\n    <div class=\"va-tree-node-root\">\n      <div class=\"va-tree-node-content\" :class=\"indentClassComputed\" @click=\"onNodeClick('node')\">\n        <div\n          v-if=\"$props.node.hasChildren\"\n          class=\"va-tree-node-content__item va-tree-node-content__item--leaf\"\n          @click.stop=\"onNodeClick('leaf')\"\n        >\n          <slot name=\"icon-toggle\" v-bind=\"$props.node\">\n            <va-icon\n              :name=\"isExpandedComputed ? 'keyboard_arrow_down' : 'keyboard_arrow_right'\"\n              size=\"20px\"\n            />\n          </slot>\n        </div>\n        <div\n          v-if=\"selectable\"\n          class=\"va-tree-node-content__item\"\n          @click.stop\n        >\n          <slot name=\"checkbox\" v-bind=\"$props.node\">\n            <va-checkbox\n              :model-value=\"$props.node.checked\"\n              :color=\"colorComputed\"\n              indeterminate\n              @update:model-value=\"(v) => toggleCheckbox($props.node, v)\"\n              class=\"va-tree-node__checkbox\"\n            />\n          </slot>\n        </div>\n        <div v-if=\"iconComputed\" class=\"va-tree-node-content__item\">\n          <slot name=\"icon\" v-bind=\"$props.node\">\n            <va-icon :name=\"iconComputed\" size=\"small\" />\n          </slot>\n        </div>\n        <div class=\"va-tree-node-content__body\" :class=\"cursorClassComputed\">\n          <slot name=\"content\" v-bind=\"$props.node\">{{ labelComputed }}</slot>\n        </div>\n      </div>\n    </div>\n    <div\n      v-show=\"$props.node.hasChildren\"\n      :aria-hidden=\"!$props.node.expanded\"\n      class=\"va-tree-node-children\"\n      :class=\"expandedClassComputed\"\n    >\n      <va-tree-node\n        v-for=\"childNode in $props.node.children\"\n        :key=\"getTrackBy(childNode)\"\n        :node=\"childNode\"\n      >\n        <template v-for=\"(_, name) in $slots\" :key=\"name\" v-slot:[name]=\"slotScope: any\">\n          <slot :name=\"name\" v-bind=\"slotScope\" />\n        </template>\n      </va-tree-node>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, PropType } from 'vue'\n\nimport { useBem, useStrictInject } from '../../../../composables'\n\nimport { VaIcon, VaCheckbox } from '../../../'\nimport { TreeViewKey, TreeNode } from '../../types'\n\nconst INJECTION_ERROR_MESSAGE = 'The VaTreeNode component should be used in the context of VaTreeView component'\n</script>\n\n<script lang=\"ts\" setup>\n\ndefineOptions({\n  name: 'VaTreeNode',\n})\n\nconst props = defineProps({\n  node: {\n    type: Object as PropType<TreeNode>,\n    required: true,\n  },\n})\n\nconst {\n  iconBy,\n  selectable,\n  expandNodeBy,\n  colorComputed,\n  selectedNodeComputed,\n  getText,\n  getTrackBy,\n  toggleNode,\n  toggleCheckbox,\n  getNodeProperty,\n  handleKeyboardNavigation,\n} = useStrictInject(TreeViewKey, INJECTION_ERROR_MESSAGE)\n\nconst labelComputed = computed(() => getText(props.node) || '')\nconst isExpandedComputed = computed(() => props.node.hasChildren ? !!props.node.expanded : undefined)\nconst iconComputed = computed(() => getNodeProperty(props.node, iconBy))\nconst roleComputed = computed(() => props.node.hasChildren ? 'group' : 'treeitem')\n\nconst treeNodeClassComputed = useBem('va-tree-node', () => ({\n  disabled: Boolean(props.node.disabled),\n  checked: Boolean(props.node.checked),\n  hasChildren: Boolean(props.node.hasChildren),\n  [`level-${props.node.level}`]: true,\n  [`expand-by-${expandNodeBy}`]: true,\n}))\n\nconst expandedClassComputed = useBem('va-tree-node-children', () => ({\n  expanded: !!isExpandedComputed.value,\n}))\n\nconst indentClassComputed = useBem('va-tree-node-content', () => ({\n  indent: props.node.hasChildren === false,\n}))\n\nconst cursorClassComputed = useBem('va-tree-node-content', () => ({\n  clickable: (props.node.hasChildren === true && expandNodeBy === 'node'),\n}))\n\nconst tabIndexComputed = computed(() => props.node.disabled ? -1 : 0)\n\nconst onNodeClick = (type: typeof expandNodeBy) => {\n  const nodeType = expandNodeBy === 'node' && type === 'leaf' ? 'node' : type\n\n  if (expandNodeBy === nodeType) {\n    toggleNode(props.node)\n  }\n\n  selectedNodeComputed.value = props.node\n}\n</script>\n\n<style lang=\"scss\">\n@import \"../../../../styles/resources/index\";\n@import 'variables';\n\n.va-tree-node {\n  &-root {\n    display: flex;\n    padding: var(--va-tree-node-padding);\n    position: relative;\n\n    &::before {\n      content: \"\";\n      background-color: var(--va-primary);\n      border-radius: var(--va-tree-node-border-radius);\n      bottom: 0;\n      left: 0;\n      opacity: 0;\n      pointer-events: none;\n      position: absolute;\n      right: 0;\n      top: 0;\n    }\n\n    &:hover::before {\n      opacity: var(--va-tree-node-interactive-bg-opacity);\n    }\n  }\n\n  &-content {\n    display: flex;\n    flex-wrap: nowrap;\n    align-items: center;\n    width: 100%;\n\n    &__item {\n      flex: var(--va-tree-node-content-item-flex);\n      min-width: var(--va-tree-node-indent);\n      line-height: 1;\n    }\n\n    &__body {\n      flex: var(--va-tree-node-content-body-item-flex);\n      width: 100%;\n    }\n\n    &--indent {\n      margin-left: var(--va-tree-node-indent);\n    }\n\n    &--clickable {\n      cursor: pointer;\n    }\n  }\n\n  &-children {\n    display: none;\n    background: var(--va-tree-node-children-background);\n    padding-left: var(--va-tree-node-indent);\n    width: 100%;\n\n    &--expanded {\n      display: block;\n    }\n  }\n\n  &__checkbox {\n    --va-checkbox-input-padding: 0;\n  }\n\n  &--disabled {\n    @include va-disabled;\n\n    .va-tree-node-content__item--leaf {\n      cursor: pointer;\n      pointer-events: all;\n    }\n  }\n\n  &:focus-visible > .va-tree-node-root {\n    @include focus-outline;\n\n    &::before {\n      opacity: var(--va-tree-node-interactive-bg-opacity);\n    }\n  }\n\n  &--expand-by-node {\n    .va-tree-node-content {\n      cursor: pointer;\n    }\n  }\n\n  &--expand-by-leaf {\n    .va-tree-node-content__item--leaf {\n      cursor: pointer;\n    }\n  }\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;AAkFA,MAAM,0BAA0B;;;;;;;;;;;;;AAShC,UAAM,QAAQ;AAOR,UAAA;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,IACE,gBAAgB,aAAa,uBAAuB;AAExD,UAAM,gBAAgB,SAAS,MAAM,QAAQ,MAAM,IAAI,KAAK,EAAE;AACxD,UAAA,qBAAqB,SAAS,MAAM,MAAM,KAAK,cAAc,CAAC,CAAC,MAAM,KAAK,WAAW,MAAS;AACpG,UAAM,eAAe,SAAS,MAAM,gBAAgB,MAAM,MAAM,MAAM,CAAC;AACvE,UAAM,eAAe,SAAS,MAAM,MAAM,KAAK,cAAc,UAAU,UAAU;AAE3E,UAAA,wBAAwB,OAAO,gBAAgB,OAAO;AAAA,MAC1D,UAAU,QAAQ,MAAM,KAAK,QAAQ;AAAA,MACrC,SAAS,QAAQ,MAAM,KAAK,OAAO;AAAA,MACnC,aAAa,QAAQ,MAAM,KAAK,WAAW;AAAA,MAC3C,CAAC,SAAS,MAAM,KAAK,KAAK,EAAE,GAAG;AAAA,MAC/B,CAAC,aAAa,YAAY,EAAE,GAAG;AAAA,IAC/B,EAAA;AAEI,UAAA,wBAAwB,OAAO,yBAAyB,OAAO;AAAA,MACnE,UAAU,CAAC,CAAC,mBAAmB;AAAA,IAC/B,EAAA;AAEI,UAAA,sBAAsB,OAAO,wBAAwB,OAAO;AAAA,MAChE,QAAQ,MAAM,KAAK,gBAAgB;AAAA,IACnC,EAAA;AAEI,UAAA,sBAAsB,OAAO,wBAAwB,OAAO;AAAA,MAChE,WAAY,MAAM,KAAK,gBAAgB,QAAQ,iBAAiB;AAAA,IAChE,EAAA;AAEF,UAAM,mBAAmB,SAAS,MAAM,MAAM,KAAK,WAAW,KAAK,CAAC;AAE9D,UAAA,cAAc,CAAC,SAA8B;AACjD,YAAM,WAAW,iBAAiB,UAAU,SAAS,SAAS,SAAS;AAEvE,UAAI,iBAAiB,UAAU;AAC7B,mBAAW,MAAM,IAAI;AAAA,MACvB;AAEA,2BAAqB,QAAQ,MAAM;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}