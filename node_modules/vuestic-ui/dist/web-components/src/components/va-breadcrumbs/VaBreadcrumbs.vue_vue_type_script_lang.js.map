{"version":3,"file":"VaBreadcrumbs.vue_vue_type_script_lang.js","sources":["../../../../../src/components/va-breadcrumbs/VaBreadcrumbs.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { computed, defineComponent, Fragment, h, ref, VNode } from 'vue'\n\nimport { useComponentPresetProp, useAlign, useAlignProps, useColors, useTranslation } from '../../composables'\n\nimport { hasOwnProperty } from '../../utils/has-own-property'\nimport { resolveSlot } from '../../utils/resolveSlot'\n\nexport default defineComponent({\n  name: 'VaBreadcrumbs',\n  props: {\n    ...useAlignProps,\n    ...useComponentPresetProp,\n    separator: { type: String, default: '/' },\n    color: { type: String, default: null },\n    disabledColor: { type: String, default: 'secondary' },\n    activeColor: { type: String, default: null },\n    separatorColor: { type: String, default: null },\n    ariaLabel: { type: String, default: '$t:breadcrumbs' },\n  },\n  setup (props, { slots }) {\n    const { alignComputed } = useAlign(props)\n\n    const { getColor } = useColors()\n    const computedThemesSeparatorColor = computed(() => {\n      return props.separatorColor ? getColor(props.separatorColor) : null\n    })\n    const computedThemesColor = computed(() => props.color ? getColor(props.color) : null)\n    const computedThemesActiveColor = computed(() => {\n      return props.activeColor ? getColor(props.activeColor) : null\n    })\n\n    const childNodeFilter = (result: VNode[], node: VNode) => {\n      const nodes = node && node.type === Fragment && node.children ? node.children as VNode[] : [node]\n\n      return [\n        ...result,\n        ...nodes.filter((node?: VNode) => !!(node?.type as any)?.name?.match(/VaBreadcrumbsItem$/)),\n      ]\n    }\n\n    const createSeparatorComponent = () => {\n      // Temp fix for https://github.com/intlify/vue-i18n-next/issues/412\n      // `separatorNode` can be moved outside this method after update vuestic's minimal vue version to 3.1.0\n      // testing: have to monitor errors after leaving breadcrumbs page in doc\n      const separatorNode = resolveSlot(slots.separator) || [props.separator]\n\n      return h('span', {\n        'aria-hidden': true,\n        class: ['va-breadcrumbs__separator'],\n        style: [{ color: computedThemesSeparatorColor.value }],\n      }, separatorNode)\n    }\n\n    const isDisabledChild = (child: VNode) => {\n      const childPropData = child?.props\n      if (!childPropData || !hasOwnProperty(childPropData, 'disabled')) {\n        return false\n      }\n\n      if (childPropData.disabled === '') { // NOTE: by default empty attribute is ''\n        return true\n      }\n\n      return Boolean(childPropData.disabled)\n    }\n\n    const isAllChildLinks = ref(true)\n    const getChildren = () => {\n      const defaultSlotContent = resolveSlot(slots.default)\n      if (!defaultSlotContent) { return }\n      const childNodes = defaultSlotContent.reduce(childNodeFilter, []) || []\n      const childNodesLength = childNodes.length\n      const isLastIndexChildNodes = (index: number) => index === childNodesLength - 1\n      const isChildLink = (child: VNode) => {\n        const childPropData = child?.props\n        if (!childPropData || !hasOwnProperty(childPropData, 'to')) {\n          return false\n        }\n\n        return !!(childPropData.to && !childPropData.disabled)\n      }\n\n      const createChildComponent = (child: VNode, index: number) => h(\n        'span', {\n          class: ['va-breadcrumbs__item', { 'va-breadcrumbs__item--disabled': isDisabledChild(child) }],\n          'aria-current': (isLastIndexChildNodes(index) && isChildLink(child)) ? 'location' : false,\n          style: {\n            color: isDisabledChild(child)\n              ? getColor(props.disabledColor)\n              : isLastIndexChildNodes(index) ? computedThemesActiveColor.value : computedThemesColor.value,\n          },\n        },\n        [child],\n      )\n\n      const children = [] as VNode[]\n\n      if (childNodesLength) {\n        childNodes.forEach((child: VNode, index: number) => {\n          if (isAllChildLinks.value && !isChildLink(child)) {\n            isAllChildLinks.value = false\n          }\n\n          children.push(createChildComponent(child, index))\n\n          if (!isLastIndexChildNodes(index)) {\n            children.push(createSeparatorComponent())\n          }\n        })\n      }\n\n      return children\n    }\n\n    const { tp } = useTranslation()\n\n    return () => h('div', {\n      class: 'va-breadcrumbs',\n      style: alignComputed.value,\n      role: isAllChildLinks.value ? 'navigation' : undefined,\n      'aria-label': (isAllChildLinks.value ? tp(props.ariaLabel) : undefined),\n    }, getChildren())\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"variables\";\n\n.va-breadcrumbs {\n  display: var(--va-breadcrumbs-display);\n  width: var(--va-breadcrumbs-width);\n  justify-content: var(--va-breadcrumbs-justify-content);\n  font-family: var(--va-font-family);\n\n  &__item {\n    display: var(--va-breadcrumbs-item-display);\n  }\n\n  &__separator {\n    padding: var(--va-breadcrumbs-separator-padding);\n    display: var(--va-breadcrumbs-separator-display);\n  }\n}\n</style>\n"],"names":["node"],"mappings":"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"}