{"version":3,"file":"utils.js","sources":["../../../../../src/services/color/utils.ts"],"sourcesContent":["import kebabCase from 'lodash/kebabCase.js'\nimport camelCase from 'lodash/camelCase.js'\nimport { ColorTranslator } from 'colortranslator'\nimport type { HSLObject, HEXObject, RGBObject } from 'colortranslator'\nimport { warn } from 'vue'\n\nexport type ColorInput = string | HEXObject | HSLObject | RGBObject\n\nconst makeColor = (color: ColorInput) => {\n  try {\n    return new ColorTranslator(color)\n  } catch (e) {\n    throw new Error(`Color ${color} is not valid. Please, provide valid color.`, {\n      cause: e,\n    })\n  }\n}\n\nexport const isCSSVariable = (strColor: string): boolean => /var\\(--.+\\)/.test(strColor)\nexport const cssVariableName = (colorName: string) => `--va-${kebabCase(colorName)}`\nexport const normalizeColorName = (colorName: string) => camelCase(colorName)\n\nexport const colorToRgba = (color: ColorInput, opacity: number) => {\n  return makeColor(color).setA(opacity).RGBA\n}\n\nexport const getColorLightness = (color: ColorInput) => {\n  const { R, G, B } = makeColor(color)\n  return Math.sqrt(R * R * 0.241 + G * G * 0.691 + B * B * 0.068)\n}\n\nexport const getBoxShadowColor = (color: ColorInput, opacity = 0.4) => {\n  return makeColor(color).setA(opacity).RGBA\n}\n\nexport const getBoxShadowColorFromBg = (background: ColorInput, opacity = 0.4) => {\n  return makeColor(background).setA(opacity).RGBA\n}\n\nexport const getHoverColor = (color: ColorInput, opacity = 0.2) => {\n  return makeColor(color).setA(opacity).RGBA\n}\n\nexport const getFocusColor = (color: ColorInput, opacity = 0.3) => {\n  return makeColor(color).setA(opacity).RGBA\n}\n\nexport const shiftHSLAColor = (color: ColorInput, offset: { h?: number; s?: number; l?: number; a?: number }) => {\n  const result = makeColor(color)\n\n  if (offset.h) { result.setH(result.H + offset.h) }\n\n  if (offset.s) { result.setS(result.S + offset.s) }\n\n  if (offset.l) { result.setL(result.L + offset.l) }\n\n  if (offset.a) { result.setA(result.A + offset.a) }\n\n  return result.HSLA\n}\n\nexport const setHSLAColor = (color: ColorInput, newColor: { h?: number; s?: number; l?: number; a?: number }) => {\n  const result = makeColor(color)\n\n  if (newColor.h !== undefined) { result.setH(newColor.h) }\n\n  if (newColor.s !== undefined) { result.setS(newColor.s) }\n\n  if (newColor.l !== undefined) { result.setL(newColor.l) }\n\n  if (newColor.a !== undefined) { result.setA(newColor.a) }\n\n  return result.HSLA\n}\n\n/**\n * This method guesses second color for gradient based on first one.\n * Calculation method should differ for different colors, so we split color circle\n * in zones.\n *\n * @param color\n */\nexport const shiftGradientColor = (color: ColorInput): string => {\n  const newColor = ColorTranslator.toHSLA(color, false) as HSLObject\n\n  // Gray\n  if (newColor.s < 10) {\n    return shiftHSLAColor(newColor, { h: 2, s: 5, l: 10 })\n  }\n  // Unsaturated (too pale, gray-ish, monotone)\n  // For unsaturated color, hue change does nothing.\n  if (newColor.s < 30) {\n    return shiftHSLAColor(newColor, { s: -14, l: 11 })\n  }\n  // Red\n  if ((newColor.h >= 0 && newColor.h < 44) || (newColor.h >= 285)) {\n    return shiftHSLAColor(newColor, { h: 11, s: 27, l: 8 })\n  }\n  // Yellow\n  if (newColor.h >= 44 && newColor.h < 85) {\n    return shiftHSLAColor(newColor, { h: 3, l: 9 })\n  }\n  // Green\n  if (newColor.h >= 85 && newColor.h < 165) {\n    return shiftHSLAColor(newColor, { h: 16, l: 14 })\n  }\n  // Blue\n  if (newColor.h >= 165 && newColor.h < 285) {\n    return shiftHSLAColor(newColor, { h: -15, s: 3, l: 2 })\n  }\n\n  throw new Error('This method should handle all colors. But it didn\\'t for some reason.')\n}\n\nexport const getGradientBackground = (color: string) => {\n  const colorLeft = shiftGradientColor(color)\n  const colorRight = ColorTranslator.toHSLA(color)\n\n  return `linear-gradient(to right, ${colorLeft}, ${colorRight})`\n}\n\nexport const getStateMaskGradientBackground = (color: string, maskColor: string, maskOpacity: number) => {\n  const mask = colorToRgba(maskColor, maskOpacity)\n\n  return `linear-gradient(0deg, ${mask}, ${mask}), ${color}`\n}\n\n/**\n * Check if color is valid hsl, hsla, rga, rgba or hex color\n * Taken from https://www.regextester.com/103656\n * Check options <or> isCSSVariable(prop) <or> CSS.supports('color', prop) deleted due to problems with SSR and opacity\n * Details are in the discussion: https://github.com/epicmaxco/vuestic-ui/pull/1589\n * @param strColor\n */\nexport const isColor = (strColor: string): boolean => {\n  // Need to use Regex instead of DOM methods because we support SSR\n  const cssColorRegex = /^#([\\da-f]{3}){1,2}$|^#([\\da-f]{4}){1,2}$|(rgb|hsl)a?\\((\\s*-?\\d+%?\\s*,){2}(\\s*-?\\d+%?\\s*,?\\s*\\)?)(,\\s*(0?\\.\\d+)?|1)?\\)/\n\n  return cssColorRegex.test(strColor.toLocaleLowerCase())\n}\n\nexport const applyColors = (color1: ColorInput, color2: ColorInput) => {\n  const c1 = makeColor(color1)\n  const c2 = makeColor(color2)\n  const weight = c2.A\n\n  if (weight === 1) { return c2.RGBA }\n  if (weight === 0) { return c1.RGBA }\n\n  c1.setR(Math.round((c1.R) * (1 - weight) + (c2.R) * weight))\n  c1.setG(Math.round((c1.G) * (1 - weight) + (c2.G) * weight))\n  c1.setB(Math.round((c1.B) * (1 - weight) + (c2.B) * weight))\n\n  return c1.RGBA\n}\n\nexport const isColorTransparent = (color: ColorInput) => {\n  if (!color) { return false }\n  if (color === 'transparent') { return true }\n\n  return makeColor(color).A <= 0.1\n}\n"],"names":[],"mappings":"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"}