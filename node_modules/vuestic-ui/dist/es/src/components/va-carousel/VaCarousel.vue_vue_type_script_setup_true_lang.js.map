{"version":3,"file":"VaCarousel.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../src/components/va-carousel/VaCarousel.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-carousel\"\n    :class=\"{\n      'va-carousel--vertical': $props.vertical,\n      [`va-carousel--${$props.effect}`]: true\n    }\"\n    :style=\"{ height: ratioComputed ? 'auto' : height }\"\n    role=\"region\"\n    :aria-label=\"tp($props.ariaLabel)\"\n  >\n    <template v-if=\"$props.arrows && doShowDirectionButtons\">\n      <div\n        v-if=\"doShowPrevButton\"\n        class=\"va-carousel__arrow va-carousel__arrow--left\"\n        @click=\"prevWithPause\"\n        @keydown.enter.stop=\"prevWithPause\"\n      >\n        <slot name=\"prev-arrow\">\n          <va-hover #default=\"{ hover }\" stateful>\n            <va-button\n              :color=\"hover ? computedHoverColor : computedColor\"\n              :icon=\"vertical ? 'va-arrow-up' : 'va-arrow-left'\"\n              :aria-label=\"tp($props.ariaPreviousLabel)\"\n            />\n          </va-hover>\n        </slot>\n      </div>\n      <div\n        v-if=\"doShowNextButton\"\n        class=\"va-carousel__arrow va-carousel__arrow--right\"\n        @click=\"nextWithPause\"\n        @keydown.enter.stop=\"nextWithPause\"\n      >\n        <slot name=\"next-arrow\">\n          <va-hover #default=\"{ hover }\" stateful>\n            <va-button\n              :color=\"hover ? computedHoverColor : computedColor\"\n              :icon=\"vertical ? 'va-arrow-down' : 'va-arrow-right'\"\n              :aria-label=\"tp($props.ariaNextLabel)\"\n            />\n          </va-hover>\n        </slot>\n      </div>\n    </template>\n\n    <div class=\"va-carousel__indicators\" v-if=\"$props.indicators\">\n      <div\n        class=\"va-carousel__indicator\"\n        v-for=\"(item, index) in $props.items\" :key=\"index\"\n        :class=\"{ 'va-carousel__indicator--active': isCurrentSlide(index) }\"\n        v-bind=\"getIndicatorEvents(index)\"\n      >\n        <slot name=\"indicator\" v-bind=\"{ item, index, goTo: goToWithPause, isActive: isCurrentSlide(index) }\">\n          <va-hover #default=\"{ hover }\" stateful>\n            <va-button\n              :aria-label=\"tp($props.ariaGoToSlideLabel, { index: index + 1 })\"\n              round\n              :color=\"isCurrentSlide(index) ? computedActiveColor : (hover ? computedHoverColor : computedColor)\"\n            >\n              {{ index + 1 }}\n            </va-button>\n          </va-hover>\n        </slot>\n      </div>\n    </div>\n\n    <div class=\"va-carousel__content\">\n      <div\n        ref=\"slidesContainer\"\n        class=\"va-carousel__slides\"\n        :style=\"computedSlidesStyle\"\n        role=\"list\"\n      >\n        <div\n          v-for=\"(item, index) in slides\" :key=\"item\"\n          role=\"listitem\"\n          class=\"va-carousel__slide\"\n          :style=\"slideStyleComputed\"\n          :aria-hidden=\"!isCurrentSlide(index)\"\n          :aria-current=\"isCurrentSlide(index)\"\n          :aria-label=\"tp($props.ariaSlideOfLabel, { index: index + 1, length: slides.length })\"\n        >\n          <slot v-bind=\"{ item, index, goTo: goToWithPause, isActive: isCurrentSlide(index) }\">\n            <va-image\n              v-bind=\"vaImageProps\"\n              :src=\"isObjectSlides ? item.src : item\"\n              :alt=\"isObjectSlides ? item.alt : ''\"\n              :draggable=\"false\"\n            />\n          </slot>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { shallowRef, PropType, computed } from 'vue'\nimport { useCarousel } from './hooks/useCarousel'\nimport { useCarouselAnimation } from './hooks/useCarouselAnimation'\nimport { useCarouselColor } from './hooks/useCarouselColors'\nimport {\n  useStateful, useStatefulProps, useStatefulEmits,\n  useSwipe, useSwipeProps, useComponentPresetProp,\n  useTranslation, useNumericProp,\n} from '../../composables'\n\nimport { VaImage } from '../va-image'\nimport { VaButton } from '../va-button'\nimport { VaHover } from '../va-hover'\n\nimport type { SwipeState } from '../../composables'\n\nimport { extractComponentProps, filterComponentProps } from '../../utils/component-options'\n\nconst VaImageProps = extractComponentProps(VaImage, ['src', 'alt'])\n</script>\n\n<script lang=\"ts\" setup>\n\ndefineOptions({\n  name: 'VaCarousel',\n})\n\nconst props = defineProps({\n  ...useSwipeProps,\n  ...useStatefulProps,\n  ...useComponentPresetProp,\n  ...VaImageProps,\n\n  stateful: { type: Boolean, default: true },\n  modelValue: { type: Number, default: 0 },\n  items: { type: Array as PropType<any[]>, required: true },\n\n    // Animations\n  autoscroll: { type: Boolean, default: false },\n  autoscrollInterval: { type: [Number, String], default: 5000 },\n  autoscrollPauseDuration: { type: [Number, String], default: 2000 },\n  infinite: { type: Boolean, default: true },\n  fadeKeyframe: { type: String, default: 'va-carousel-fade-appear 1s' },\n\n    // Visual\n  arrows: { type: Boolean, default: true },\n  indicators: { type: Boolean, default: true },\n  indicatorTrigger: {\n    type: String as PropType<'click' | 'hover' | 'none'>,\n    default: 'click',\n    validator: (value: string) => ['click', 'hover', 'none'].includes(value),\n  },\n  vertical: { type: Boolean, default: false },\n  height: { type: String, default: '300px' },\n  effect: {\n    type: String as PropType<'fade' | 'transition'>,\n    default: 'transition',\n    validator: (value: string) => ['fade', 'transition'].includes(value),\n  },\n  color: { type: String, default: 'primary' },\n  ratio: { type: [Number, String] },\n\n  ariaLabel: { type: String, default: '$t:carousel' },\n  ariaPreviousLabel: { type: String, default: '$t:goPreviousSlide' },\n  ariaNextLabel: { type: String, default: '$t:goNextSlide' },\n  ariaGoToSlideLabel: { type: String, default: '$t:goSlide' },\n  ariaSlideOfLabel: { type: String, default: '$t:slideOf' },\n})\n\nconst emit = defineEmits([...useStatefulEmits])\n\nconst { valueComputed: currentSlide } = useStateful(props, emit, 'modelValue')\nconst autoscrollIntervalComputed = useNumericProp('autoscrollInterval')\nconst autoscrollPauseDurationComputed = useNumericProp('autoscrollPauseDuration')\nconst ratioComputed = useNumericProp('ratio')\n\nconst {\n  goTo, next, prev,\n  doShowNextButton, doShowPrevButton, doShowDirectionButtons,\n} = useCarousel(props, currentSlide)\n\nconst { withPause, computedSlidesStyle, slides } = useCarouselAnimation({\n  items: props.items,\n  autoscrollInterval: autoscrollIntervalComputed.value!,\n  autoscrollPauseDuration: autoscrollPauseDurationComputed.value!,\n  autoscroll: props.autoscroll,\n  infinite: props.infinite,\n  effect: props.effect,\n  vertical: props.vertical,\n  fadeKeyframe: props.fadeKeyframe,\n}, currentSlide)\nconst isObjectSlides = computed(() => {\n  return props.items.length && props.items.every((el) => !!el && typeof el === 'object' && !!el?.src)\n})\nconst isCurrentSlide = (index: number) => index === currentSlide.value\n\nconst slideStyleComputed = computed(() => ({\n  animation: props.effect === 'fade' ? 'fadeKeyframe' : undefined,\n}))\n\n// swiping\nconst slidesContainer = shallowRef<HTMLElement>()\nconst onSwipe = (state: SwipeState) => {\n  switch (state.direction) {\n    case 'right':\n    case 'up':\n      doShowPrevButton.value && prev()\n      break\n    case 'left':\n    case 'down':\n      doShowNextButton.value && next()\n  }\n}\nuseSwipe(props, slidesContainer, onSwipe)\n\nconst getIndicatorEvents = (index: number) => {\n  if (props.indicatorTrigger === 'hover') {\n    return { onmouseover: () => goTo(index) }\n  }\n  if (props.indicatorTrigger === 'click') {\n    return { onclick: () => goTo(index) }\n  }\n  // none\n  return {}\n}\n\nconst { tp, t } = useTranslation()\n\nconst {\n  computedActiveColor,\n  computedColor,\n  computedHoverColor,\n} = useCarouselColor()\n\nconst vaImageProps = filterComponentProps(VaImageProps)\n\nconst goToWithPause = withPause(goTo)\nconst prevWithPause = withPause(prev)\nconst nextWithPause = withPause(next)\n\ndefineExpose({\n  currentSlide,\n  goTo,\n  next,\n  prev,\n  goToWithPause,\n  prevWithPause,\n  nextWithPause,\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"./_variables.scss\";\n\n@keyframes va-carousel-fade-appear {\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.va-carousel {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  max-height: 100%;\n  min-height: var(--va-carousel-min-height);\n  background: var(--va-carousel-background);\n  box-shadow: var(--va-carousel-box-shadow);\n  border-radius: var(--va-carousel-border-radius);\n  position: relative;\n  overflow: hidden;\n\n  &__content {\n    flex: 1;\n    width: 100%;\n    white-space: nowrap;\n  }\n\n  &__slides {\n    width: 100%;\n    height: 100%;\n    transition: var(--va-carousel-slides-transition);\n  }\n\n  &__slide {\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  &__indicators {\n    width: 100%;\n    position: absolute;\n    bottom: var(--va-carousel-padding);\n    display: flex;\n    justify-content: center;\n    z-index: 2;\n    overflow-x: auto;\n    left: 50%;\n    transform: translateX(-50%);\n\n    @include va-scroll();\n\n    & > * {\n      margin: 0 var(--va-carousel-indicators-gap);\n    }\n  }\n\n  &__arrow {\n    z-index: 1;\n    width: max-content;\n    height: max-content;\n\n    &--right {\n      right: var(--va-carousel-padding);\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n    }\n\n    &--left {\n      left: var(--va-carousel-padding);\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n    }\n  }\n\n  &--vertical {\n    .va-carousel {\n      &__slide {\n        display: flex;\n      }\n\n      &__arrow {\n        z-index: 1;\n\n        &--right {\n          bottom: var(--va-carousel-padding);\n          top: auto;\n          left: 50%;\n          transform: translateX(-50%);\n        }\n\n        &--left {\n          top: var(--va-carousel-padding);\n          left: 50%;\n          transform: translateX(-50%);\n        }\n      }\n\n      &__indicators {\n        left: var(--va-carousel-padding);\n        flex-direction: column;\n        width: auto;\n        height: 100%;\n        top: 50%;\n        transform: translateY(-50%);\n        overflow-x: hidden;\n        overflow-y: auto;\n\n        & > * {\n          margin: var(--va-carousel-indicators-gap) 0;\n        }\n      }\n    }\n  }\n\n  .va-image {\n    height: 100%;\n    width: 100%;\n  }\n\n  .va-button {\n    @include keyboard-focus-outline($offset: -2px);\n  }\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAoHA,MAAM,eAAe,sBAAsB,SAAS,CAAC,OAAO,KAAK,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASlE,UAAM,QAAQ;AA0Cd,UAAM,OAAO;AAEb,UAAM,EAAE,eAAe,iBAAiB,YAAY,OAAO,MAAM,YAAY;AACvE,UAAA,6BAA6B,eAAe,oBAAoB;AAChE,UAAA,kCAAkC,eAAe,yBAAyB;AAC1E,UAAA,gBAAgB,eAAe,OAAO;AAEtC,UAAA;AAAA,MACJ;AAAA,MAAM;AAAA,MAAM;AAAA,MACZ;AAAA,MAAkB;AAAA,MAAkB;AAAA,IAAA,IAClC,YAAY,OAAO,YAAY;AAEnC,UAAM,EAAE,WAAW,qBAAqB,OAAA,IAAW,qBAAqB;AAAA,MACtE,OAAO,MAAM;AAAA,MACb,oBAAoB,2BAA2B;AAAA,MAC/C,yBAAyB,gCAAgC;AAAA,MACzD,YAAY,MAAM;AAAA,MAClB,UAAU,MAAM;AAAA,MAChB,QAAQ,MAAM;AAAA,MACd,UAAU,MAAM;AAAA,MAChB,cAAc,MAAM;AAAA,OACnB,YAAY;AACT,UAAA,iBAAiB,SAAS,MAAM;AACpC,aAAO,MAAM,MAAM,UAAU,MAAM,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,OAAO,OAAO,YAAY,CAAC,EAAC,yBAAI,IAAG;AAAA,IAAA,CACnG;AACD,UAAM,iBAAiB,CAAC,UAAkB,UAAU,aAAa;AAE3D,UAAA,qBAAqB,SAAS,OAAO;AAAA,MACzC,WAAW,MAAM,WAAW,SAAS,iBAAiB;AAAA,IACtD,EAAA;AAGF,UAAM,kBAAkB;AAClB,UAAA,UAAU,CAAC,UAAsB;AACrC,cAAQ,MAAM,WAAW;AAAA,QACvB,KAAK;AAAA,QACL,KAAK;AACH,2BAAiB,SAAS;AAC1B;AAAA,QACF,KAAK;AAAA,QACL,KAAK;AACH,2BAAiB,SAAS;MAC9B;AAAA,IAAA;AAEO,aAAA,OAAO,iBAAiB,OAAO;AAElC,UAAA,qBAAqB,CAAC,UAAkB;AACxC,UAAA,MAAM,qBAAqB,SAAS;AACtC,eAAO,EAAE,aAAa,MAAM,KAAK,KAAK,EAAE;AAAA,MAC1C;AACI,UAAA,MAAM,qBAAqB,SAAS;AACtC,eAAO,EAAE,SAAS,MAAM,KAAK,KAAK,EAAE;AAAA,MACtC;AAEA,aAAO;IAAC;AAGV,UAAM,EAAE,IAAI,EAAE,IAAI,eAAe;AAE3B,UAAA;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,QACE,iBAAiB;AAEf,UAAA,eAAe,qBAAqB,YAAY;AAEhD,UAAA,gBAAgB,UAAU,IAAI;AAC9B,UAAA,gBAAgB,UAAU,IAAI;AAC9B,UAAA,gBAAgB,UAAU,IAAI;AAEvB,aAAA;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}