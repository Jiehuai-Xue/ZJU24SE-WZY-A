{"version":3,"file":"VaFileUploadListItem.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../../src/components/va-file-upload/VaFileUploadListItem/VaFileUploadListItem.vue"],"sourcesContent":["<template>\n  <va-list-item\n    class=\"va-file-upload-list-item\"\n    tabindex=\"-1\"\n    :class=\"computedClasses\"\n    :disabled=\"disabled\"\n    :aria-disabled=\"disabled\"\n  >\n    <va-list-item-section v-if=\"removed && undo\">\n      <va-file-upload-undo @recover=\"recoverFile\" />\n    </va-list-item-section>\n    <va-list-item-section v-else>\n      <div class=\"va-file-upload-list-item__content\">\n        <div v-if=\"file && file.name\" class=\"va-file-upload-list-item__name\">\n          {{ file && file.name }}\n        </div>\n        <div class=\"va-file-upload-list-item__size\">\n          {{ file && file.size }}\n        </div>\n        <va-button\n          v-if=\"!disabled\"\n          flat\n          color=\"danger\"\n          icon=\"clear\"\n          class=\"va-file-upload-list-item__delete\"\n          :aria-label=\"tp($props.ariaRemoveFileLabel)\"\n          @click.stop=\"removeFile\"\n          @keydown.enter.stop=\"removeFile\"\n          @keydown.space.stop=\"removeFile\"\n          @focus=\"onFocus\"\n          @blur=\"onBlur\"\n        />\n      </div>\n    </va-list-item-section>\n  </va-list-item>\n</template>\n\n<script lang=\"ts\">\nimport { ref, PropType } from 'vue'\n\nimport { useBem, useFocus, useStrictInject, useTranslation } from '../../../composables'\nimport { VaFileUploadKey, ConvertedFile } from '../types'\n\nimport { VaButton } from '../../va-button'\nimport { VaListItem, VaListItemSection } from '../../va-list'\nimport { VaFileUploadUndo } from '../VaFileUploadUndo'\n\nconst INJECTION_ERROR_MESSAGE = 'The VaFileUploadListItem component should be used in the context of VaFileUpload component'\n</script>\n\n<script lang=\"ts\" setup>\nconst { tp } = useTranslation()\n\ndefineOptions({\n  name: 'VaFileUploadListItem',\n})\n\nconst props = defineProps({\n  file: { type: Object as PropType<ConvertedFile | null>, default: null },\n  color: { type: String, default: 'success' },\n\n  ariaRemoveFileLabel: { type: String, default: '$t:removeFile' },\n})\n\nconst emit = defineEmits(['remove'])\n\nconst {\n  undo,\n  disabled,\n  undoDuration,\n} = useStrictInject(VaFileUploadKey, INJECTION_ERROR_MESSAGE)\nconst { onFocus, onBlur } = useFocus()\nconst removed = ref(false)\n\nconst removeFile = () => {\n  if (undo.value) {\n    removed.value = true\n\n    setTimeout(() => {\n      if (removed.value) {\n        emit('remove')\n        removed.value = false\n      }\n    }, undoDuration.value ?? 0)\n  } else {\n    emit('remove')\n    removed.value = false\n  }\n}\n\nconst recoverFile = () => { removed.value = false }\n\nconst computedClasses = useBem('va-file-upload-list-item', () => ({\n  undo: removed.value,\n}))\n</script>\n\n<style lang='scss'>\n@import \"../../../styles/resources\";\n@import \"variables\";\n\n.va-file-upload-list-item {\n  background-color: var(--va-file-upload-list-item-background-color);\n  box-shadow: var(--va-file-upload-list-item-box-shadow, var(--va-block-box-shadow));\n  border-radius: var(--va-file-upload-list-item-border-radius, var(--va-block-border-radius));\n  position: relative;\n  line-height: 1.5rem;\n  padding: 1.125rem 0.5rem 1rem 1rem;\n  max-width: 100%;\n  width: 100%;\n\n  & + & {\n    margin-top: 0.5rem;\n  }\n\n  .va-list-item__inner {\n    padding: 0;\n    overflow: hidden;\n  }\n\n  &__content {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  &__name {\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    flex-basis: 60%;\n    overflow: hidden;\n  }\n\n  &__size {\n    color: var(--va-file-upload-list-item-size-text-color);\n  }\n\n  &__delete {\n    font-size: 1.5rem;\n    cursor: pointer;\n\n    --va-button-size: 1.5rem;\n  }\n\n  &--undo {\n    overflow: hidden;\n    position: relative;\n\n    .va-list-item-section {\n      padding: 0;\n    }\n  }\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AA+CA,MAAM,0BAA0B;;;;;;;;;;;;;AAI1B,UAAA,EAAE,OAAO;AAaf,UAAM,OAAO;AAEP,UAAA;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,IAAA,IACE,gBAAgB,iBAAiB,uBAAuB;AAC5D,UAAM,EAAE,SAAS,OAAO,IAAI,SAAS;AAC/B,UAAA,UAAU,IAAI,KAAK;AAEzB,UAAM,aAAa,MAAM;AACvB,UAAI,KAAK,OAAO;AACd,gBAAQ,QAAQ;AAEhB,mBAAW,MAAM;AACf,cAAI,QAAQ,OAAO;AACjB,iBAAK,QAAQ;AACb,oBAAQ,QAAQ;AAAA,UAClB;AAAA,QAAA,GACC,aAAa,SAAS,CAAC;AAAA,MAAA,OACrB;AACL,aAAK,QAAQ;AACb,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IAAA;AAGF,UAAM,cAAc,MAAM;AAAE,cAAQ,QAAQ;AAAA,IAAA;AAEtC,UAAA,kBAAkB,OAAO,4BAA4B,OAAO;AAAA,MAChE,MAAM,QAAQ;AAAA,IACd,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}