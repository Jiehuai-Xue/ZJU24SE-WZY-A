{"version":3,"file":"va-date-picker-calendar-hook.js","sources":["../../../../../../../src/components/va-date-picker/components/VaDayPicker/va-date-picker-calendar-hook.ts"],"sourcesContent":["import { computed, Ref } from 'vue'\n\nimport { DatePickerView } from '../../types'\n\n/** Returns last day of previous month */\nexport const getMonthDaysCount = (year: number, month: number): number => new Date(year, month + 1, 0).getDate()\n\nexport const getMonthStartWeekday = (year: number, month: number) => new Date(year, month, 1).getDay()\n\n/** Returns array from 1 to length */\nexport const getNumbersArray = (length: number) => Array.from(Array(length).keys()).map((k) => k + 1)\n\nexport const useVaDatePickerCalendar = (view: Ref<DatePickerView>, options?: { firstWeekday?: Ref<string> }) => {\n  const CALENDAR_ROWS_COUNT = 6 // Need 6 rows if first day of a month is Saturday and the last day is Monday 31th.\n\n  const localizeWeekday = (weekdayNumber: number) => {\n    if (!options || !options.firstWeekday?.value) { return weekdayNumber }\n\n    if (options.firstWeekday.value.toLowerCase() === 'monday') {\n      // Set Sunday as 7th day of the week and Monday as first day of the week.\n      return weekdayNumber === 0 ? 6 : weekdayNumber - 1\n    }\n\n    return weekdayNumber\n  }\n\n  const currentMonthStartWeekday = computed(() => localizeWeekday(getMonthStartWeekday(view.value.year, view.value.month)))\n\n  const getPreviousDates = () => {\n    if (currentMonthStartWeekday.value === 0) { return [] }\n\n    const prevMonthDaysCount = getMonthDaysCount(view.value.year, view.value.month - 1)\n    const prevMonthDays: number[] = getNumbersArray(prevMonthDaysCount)\n\n    return prevMonthDays\n      .slice(-currentMonthStartWeekday.value)\n      .map((d) => new Date(view.value.year, view.value.month - 1, d))\n  }\n\n  const getCurrentDates = () => {\n    const currentMonthDays: number[] = getNumbersArray(getMonthDaysCount(view.value.year, view.value.month))\n\n    return currentMonthDays.map((d) => new Date(view.value.year, view.value.month, d))\n  }\n\n  const prevAndCurrentDays = computed(() => [...getPreviousDates(), ...getCurrentDates()])\n  const currentMonthEndIndex = computed(() => prevAndCurrentDays.value.length)\n\n  const calendarDates = computed(() => {\n    const days = prevAndCurrentDays.value\n\n    const daysRemaining = 7 * CALENDAR_ROWS_COUNT - days.length\n\n    const nextMonthDaysCount = getMonthDaysCount(view.value.year, view.value.month + 1)\n    const nextMonthDays: number[] = getNumbersArray(nextMonthDaysCount)\n\n    return [\n      ...days,\n      ...nextMonthDays\n        .slice(0, daysRemaining)\n        .map((d) => new Date(view.value.year, view.value.month + 1, d)),\n    ]\n  })\n\n  return { calendarDates, currentMonthStartIndex: currentMonthStartWeekday, currentMonthEndIndex }\n}\n"],"names":[],"mappings":";AAKa,MAAA,oBAAoB,CAAC,MAAc,UAA0B,IAAI,KAAK,MAAM,QAAQ,GAAG,CAAC,EAAE,QAAQ;AAElG,MAAA,uBAAuB,CAAC,MAAc,UAAkB,IAAI,KAAK,MAAM,OAAO,CAAC,EAAE;AAGvF,MAAM,kBAAkB,CAAC,WAAmB,MAAM,KAAK,MAAM,MAAM,EAAE,KAAM,CAAA,EAAE,IAAI,CAAC,MAAM,IAAI,CAAC;AAEvF,MAAA,0BAA0B,CAAC,MAA2B,YAA6C;AAC9G,QAAM,sBAAsB;AAEtB,QAAA,kBAAkB,CAAC,kBAA0B;;AACjD,QAAI,CAAC,WAAW,GAAC,aAAQ,iBAAR,mBAAsB,QAAO;AAAS,aAAA;AAAA,IAAc;AAErE,QAAI,QAAQ,aAAa,MAAM,YAAA,MAAkB,UAAU;AAElD,aAAA,kBAAkB,IAAI,IAAI,gBAAgB;AAAA,IACnD;AAEO,WAAA;AAAA,EAAA;AAGT,QAAM,2BAA2B,SAAS,MAAM,gBAAgB,qBAAqB,KAAK,MAAM,MAAM,KAAK,MAAM,KAAK,CAAC,CAAC;AAExH,QAAM,mBAAmB,MAAM;AACzB,QAAA,yBAAyB,UAAU,GAAG;AAAE,aAAO;IAAG;AAEhD,UAAA,qBAAqB,kBAAkB,KAAK,MAAM,MAAM,KAAK,MAAM,QAAQ,CAAC;AAC5E,UAAA,gBAA0B,gBAAgB,kBAAkB;AAElE,WAAO,cACJ,MAAM,CAAC,yBAAyB,KAAK,EACrC,IAAI,CAAC,MAAM,IAAI,KAAK,KAAK,MAAM,MAAM,KAAK,MAAM,QAAQ,GAAG,CAAC,CAAC;AAAA,EAAA;AAGlE,QAAM,kBAAkB,MAAM;AACtB,UAAA,mBAA6B,gBAAgB,kBAAkB,KAAK,MAAM,MAAM,KAAK,MAAM,KAAK,CAAC;AAEvG,WAAO,iBAAiB,IAAI,CAAC,MAAM,IAAI,KAAK,KAAK,MAAM,MAAM,KAAK,MAAM,OAAO,CAAC,CAAC;AAAA,EAAA;AAG7E,QAAA,qBAAqB,SAAS,MAAM,CAAC,GAAG,oBAAoB,GAAG,gBAAiB,CAAA,CAAC;AACvF,QAAM,uBAAuB,SAAS,MAAM,mBAAmB,MAAM,MAAM;AAErE,QAAA,gBAAgB,SAAS,MAAM;AACnC,UAAM,OAAO,mBAAmB;AAE1B,UAAA,gBAAgB,IAAI,sBAAsB,KAAK;AAE/C,UAAA,qBAAqB,kBAAkB,KAAK,MAAM,MAAM,KAAK,MAAM,QAAQ,CAAC;AAC5E,UAAA,gBAA0B,gBAAgB,kBAAkB;AAE3D,WAAA;AAAA,MACL,GAAG;AAAA,MACH,GAAG,cACA,MAAM,GAAG,aAAa,EACtB,IAAI,CAAC,MAAM,IAAI,KAAK,KAAK,MAAM,MAAM,KAAK,MAAM,QAAQ,GAAG,CAAC,CAAC;AAAA,IAAA;AAAA,EAClE,CACD;AAED,SAAO,EAAE,eAAe,wBAAwB,0BAA0B,qBAAqB;AACjG;"}